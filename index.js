// Generated by LiveScript 1.2.0
var _, toString$ = {}.toString;
_ = require('prelude-ls');
_.regexMatches = function(regex, str){
  return str.match(regex) || [];
};
_.regexExec = function(regex, str, key){
  var tmp, results$ = [];
  key == null && (key = null);
  while (tmp = regex.exec(str)) {
    if (key != null) {
      results$.push(tmp[key]);
    } else {
      results$.push(tmp);
    }
  }
  return results$;
};
_.a = function(){"use strict";for(var r=0|arguments.length,t=Array(r),n=0;r>n;n++)t[n]=arguments[n];return t}
_.clone = function(it){
  return it.slice(0);
};
_.get2D = function(i, width){
  return [i % width, Math.floor(i / width)];
};
_.get1D = function(x, y, width){
  return x + y * width;
};
_.shuffle = function(arr){
  var j, x, i;
  j = x = i = arr.length;
  while (i) {
    j = Math.floor(Math.random() * i);
    x = arr[--i];
    arr[i] = arr[j];
    arr[j] = x;
  }
  return arr;
};
_.where = function(query, arr){
  var test, i$, len$, a, results$ = [];
  test = function(it){
    var k, ref$, v;
    for (k in ref$ = query) {
      v = ref$[k];
      if (it[k] !== v) {
        return false;
      }
    }
    return true;
  };
  for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
    a = arr[i$];
    if (test(a)) {
      results$.push(a);
    }
  }
  return results$;
};
_.batch = function(count, list){
  var results$ = [];
  count = Number(count);
  if (count < 1) {
    return [];
  }
  list = list.slice(0);
  while (list.length) {
    results$.push(list.splice(0, count));
  }
  return results$;
};
_.variance = function(it){
  var avg, sum, i$, len$, v, x;
  avg = _.mean(it);
  sum = 0;
  for (i$ = 0, len$ = it.length; i$ < len$; ++i$) {
    v = it[i$];
    x = v - avg;
    sum += x * x;
  }
  return sum / it.length;
};
_.stdDeviation = function(it){
  return Math.sqrt(_.variance(it));
};
_.outsideStdDeviation = function(a, m){
  var avg, dev, i$, len$, v, results$ = [];
  m == null && (m = 1);
  avg = _.mean(a);
  dev = _.stdDeviation(a);
  for (i$ = 0, len$ = a.length; i$ < len$; ++i$) {
    v = a[i$];
    if (Math.abs(v - avg) > dev * m) {
      results$.push(v);
    }
  }
  return results$;
};
_.outsideStdDeviationBy = function(f, a, m){
  var values, avg, dev, i$, len$, k, v, results$ = [];
  m == null && (m = 1);
  values = _.map(f)(
  a);
  avg = _.mean(values);
  dev = _.stdDeviation(values);
  for (i$ = 0, len$ = a.length; i$ < len$; ++i$) {
    k = i$;
    v = a[i$];
    if (Math.abs(values[k] - avg) > dev * m) {
      results$.push(v);
    }
  }
  return results$;
};
_.chance = function(num){
  num == null && (num = 0.5);
  return Math.random() < num;
};
_.negateIf = function(b, x){
  if (b) {
    return -x;
  } else {
    return x;
  }
};
_.flipIf = function(b, v){
  if (b) {
    return !v;
  } else {
    return v;
  }
};
_.rand = function(min, max){
  return Math.floor(Math.random() * (max - min + 1) + min);
};
_.randFloat = function(min, max){
  return Math.random() * (max - min) + min;
};
_.randWeight = function(arr, o){
  var max, min, i$, len$, ref$, weight, maxPlusMin, res$, a, total, rand, current, value;
  o == null && (o = null);
  if (o != null && o.invert) {
    max = -Infinity;
    min = Infinity;
    for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
      ref$ = arr[i$], weight = ref$[1];
      if (weight < min) {
        min = weight;
      }
      if (weight > max) {
        max = weight;
      }
    }
    maxPlusMin = max + min;
    res$ = [];
    for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
      a = arr[i$];
      res$.push([a[0], maxPlusMin - a[1]]);
    }
    arr = res$;
  }
  total = 0;
  for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
    ref$ = arr[i$], weight = ref$[1];
    total += weight;
  }
  rand = Math.random() * total;
  current = 0;
  for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
    ref$ = arr[i$], value = ref$[0], weight = ref$[1];
    current += weight;
    if (rand <= current) {
      return value;
    }
  }
};
_.mapNumber = function(value, from1, from2, to1, to2, o){
  var aDist, bDist, ratio;
  o == null && (o = null);
  aDist = from2 - from1;
  bDist = to2 - to1;
  ratio = (value - from1) / aDist;
  if (o != null && o.exponent) {
    ratio = Math.pow(ratio, o.exponent);
  }
  return bDist * ratio + to1;
};
_.indexBy = function(f, item){
  var list, target, k, v, i$, len$;
  if (toString$.call(item).slice(8, -1) === 'Object') {
    list = _.values(item);
    target = f(list);
    for (k in item) {
      v = item[k];
      if (v === target) {
        return k;
      }
    }
  } else {
    target = f(item);
    for (i$ = 0, len$ = item.length; i$ < len$; ++i$) {
      k = i$;
      v = item[i$];
      if (v === target) {
        return k;
      }
    }
  }
};
_.compareArray = function(arr1, arr2){
  var i$, len$, k;
  if (arr1.length !== arr2.length) {
    return false;
  }
  for (i$ = 0, len$ = arr1.length; i$ < len$; ++i$) {
    k = i$;
    if (arr1[k] !== arr2[k]) {
      return false;
    }
  }
  return true;
};
_.chr = function(int){
  return String.fromCharCode(int);
};
_.ord = function(str){
  return str.charCodeAt(0);
};
_.isInsensitive = function(str1, str2){
  if (toString$.call(str1).slice(8, -1) !== 'String' || toString$.call(str2).slice(8, -1) !== 'String') {
    return false;
  }
  return str1.toUpperCase() === str2.toUpperCase();
};
_.inInsensitive = function(str, arr){
  var i$, len$, v;
  if (toString$.call(str).slice(8, -1) !== 'String') {
    return false;
  }
  str = str.toUpperCase();
  for (i$ = 0, len$ = arr.length; i$ < len$; ++i$) {
    v = arr[i$];
    if (v.toUpperCase() === str) {
      return true;
    }
  }
  return false;
};
_.capitalize = function(str){
  return str.substr(0, 1).toUpperCase() + str.substr(1);
};
_.isArray = function(it){
  return toString$.call(it).slice(8, -1) === 'Array';
};
_.toInt = function(it){
  if (it) {
    return 1;
  } else {
    return 0;
  }
};
_.flipEach = _.flip(_.each);
_.flipMap = _.flip(_.map);
_.flipReject = _.flip(_.reject);
_.flipFilter = _.flip(_.filter);
_.flipSetTimeout = _.flip(setTimeout);
module.exports = _;